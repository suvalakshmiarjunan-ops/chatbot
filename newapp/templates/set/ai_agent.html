<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Agent - PDF Upload</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
  <main class="container py-5">
    <h3>AI Agent - Upload PDF & Instructions</h3>
    <form method="POST" enctype="multipart/form-data" action="{% url 'ai_agent_upload' %}">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit" class="btn btn-primary">Submit</button>
    </form>
    <hr />
    <h4>Uploaded PDFs</h4>
    <ul>
      {% for pdf in uploaded_pdfs %}
        <li>
          <a href="{{ pdf.pdf_file.url }}" target="_blank">{{ pdf.pdf_file.name }}</a><br />
          <strong>Instruction:</strong> {{ pdf.instruction|linebreaks }}<br />
          <small>Uploaded: {{ pdf.uploaded_at }}</small>
        </li>
      {% empty %}
        <li>No PDFs uploaded yet.</li>
      {% endfor %}
    </ul>
  </main>
</body>
</html> -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>AI Agent - PDF Upload</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body { background:#f4f6fa; }
        .center-box {
            margin: 40px auto;
            padding: 32px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 0 16px rgba(0,0,0,0.07);
            max-width: 1000px;
        }
        .btn-group .btn {
          font-size: 0.96rem;
          padding: 5px 14px;
        }

        .pdf-list { margin-top: 32px; }
        .pdf-list h4 { margin-bottom: 18px; }
        .large-textarea textarea,
        textarea.form-control {
        min-height: 360px !important;
        font-size: 1.1rem;
        resize: vertical;
        width: 100% !important;     /* makes textarea full width of parent */
        max-width: 100%;            /* prevents overflow */
        box-sizing: border-box;     /* ensures padding/borders are included */
        }

        label.form-label { margin-bottom: 10px; font-weight: bold; font-size: 1.25rem; }
    </style>
</head>
<body>
    <main class="container pt-5">
        <div class="center-box">
            <div class="btn-group">
                <a href="#" class="btn btn-secondary">Cancel</a>
                <button type="submit" form="upload-form" class="btn btn-primary">Save</button>
            </div>
            <form id="upload-form" method="POST" enctype="multipart/form-data" action="">
                {% csrf_token %}
                <div class="mb-3">
                    <label for="id_instruction" class="form-label">Instruction</label>
                    <div class="large-textarea">
                        {{ form.instruction }}
                    </div>
                </div>
                <div class="mb-3">
                    <label for="id_pdf_file" class="form-label">Upload PDF</label>
                    {{ form.pdf_file }}
                </div>
            </form>
        </div>

        <div class="center-box pdf-list">
            <h4>Uploaded PDFs</h4>
            <ul>
              {% for pdf in uploaded_pdfs %}
                  <li>
                      <a href="{{ pdf.pdf_file.url }}" target="_blank">{{ pdf.pdf_file.name }}</a>
                      <form method="POST" action="{% url 'delete_pdf' pdf.id %}" style="display:inline;">
                          {% csrf_token %}
                          <button type="submit" class="btn btn-danger btn-sm" title="Delete">&times;</button>
                      </form>
                      <br /><small>Uploaded: {{ pdf.uploaded_at }}</small>
                  </li>
              {% empty %}
                  <li>No PDFs uploaded yet.</li>
              {% endfor %}
          </ul>
          
        </div>
    </main>
</body>
</html>
